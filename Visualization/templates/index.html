<!DOCTYPE html>

<html>
	<head>
		<style>
			ul { 
				height:200px;
				width:18%;
				overflow:hidden;
				overflow-y:scroll;
			}
		</style>
	</head>
	<h1>CSCI 5502: Welcome to World Indicator Visualization Tools</h1>

	<form action="/" method="post">
		
		    <div class="container-fluid" style = font-size:20px; font-weight:bold;>
	               {{ form.attribute.label }}
	               {{ form.attribute }}
	               {% for message in form.attribute.errors %}
	                        <div style="color:#FF0000"> {{ message }}</div>
	               {% endfor %}
	               <br>
	               {{ form.country.label }}
		           {{ form.country }}
		           {% for message in form.country.errors %}
		                <div style="color:#FF0000"> {{ message }}</div>
		           {% endfor %}
		           <br>
	               {{ form.normalizationMethod.label }}
	               {{ form.normalizationMethod }}
	               {% for message in form.normalizationMethod.errors %}
	                        <div style="color:#FF0000"> {{ message }}</div>
	               {% endfor %}
	               <br>
	               {{ form.minMaxSubmit }}
	               <br>
	        </div>
	</form>
	<div>
		<h4>Indicators</h4>
		<ul id="listOfIndicators">
		</ul>
		<p id="attributeDescription"></p>
		<br>
		<h4>Countries</h4>
		<ul id="listOfCountries">
		</ul>
	</div>
	<script type="text/javascript">
			

			indicator_data = {{ data|safe }};

			country_data = {{ countries|safe }};
		

			var cList = document.getElementById("listOfCountries");

			for (var key in country_data) {
				var entry = document.createElement('li');
				entry.appendChild(document.createTextNode(country_data[key]));
				entry.setAttribute('id', key);
				cList.appendChild(entry);
			}

			var list = document.getElementById("listOfIndicators");

			for (var key in indicator_data) {
				var entry = document.createElement('li');
				entry.appendChild(document.createTextNode(key));
				entry.setAttribute('id', key);
				entry.onclick = exploreAttribute;
				list.appendChild(entry);
			}

			function exploreAttribute() {
				var infoBox = document.getElementById("attributeDescription");
				infoBox.innerHTML = indicator_data[this.getAttribute("id")];
			}
		
		    
		</script>
</html>