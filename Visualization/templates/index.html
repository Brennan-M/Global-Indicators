<!DOCTYPE html>

<html>
	<head>
		<style>
			ul { 
				height:200px;
				width:18%;
				overflow:hidden;
				overflow-y:scroll;
			}
		</style>
	</head>
	<body>
	<h1>CSCI 5502: Welcome to World Indicator Visualization Tools</h1>
	<div>
		<div>
			<form action="/" method="post" value="minmax">
				
				    <div class="container-fluid" style = font-size:20px; font-weight:bold;>
			               {{ form.attribute.label }}
			               {{ form.attribute }}
			               {% for message in form.attribute.errors %}
			                        <div style="color:#FF0000"> {{ message }}</div>
			               {% endfor %}
				           <br>
			               {{ form.normalizationMethod.label }}
			               {{ form.normalizationMethod }}
			               {% for message in form.normalizationMethod.errors %}
			                        <div style="color:#FF0000"> {{ message }}</div>
			               {% endfor %}
			               <br>
			               {{ form.smoothingMethod.label }}
			               {{ form.smoothingMethod }}
			               {% for message in form.smoothingMethod.errors %}
			                        <div style="color:#FF0000"> {{ message }}</div>
			               {% endfor %}
			               <br>
			               <input type="submit" name="minmax" value="Visualize Global Data">
			        </div>
			</form>
		</div>
		<div>
			<h4>Indicators</h4>
			<ul id="listOfIndicators">
			</ul>
			<p id="attributeDescription"></p>
			<br>
			<h4>Countries</h4>
			<ul id="listOfCountries">
			</ul>
		</div>
		<div>
			<form action="/" method="post" value="correlation">
				<div class="container-fluid" style = font-size:20px; font-weight:bold;>
	               {{ form2.attribute2.label }}
	               {{ form2.attribute2 }}
	               {% for message in form2.attribute2.errors %}
	                        <div style="color:#FF0000"> {{ message }}</div>
	               {% endfor %}
		           <br>
		           {{ form2.country.label }}
	               {{ form2.country }}
	               {% for message in form2.country.errors %}
	                        <div style="color:#FF0000"> {{ message }}</div>
	               {% endfor %}
	               <br>
					<input type="submit" name="correlation" value="Calculate Correlations">
				</div>
			</form>
		</div>
	</div>
	</body>
	<script type="text/javascript">
			

			indicator_data = {{ data|safe }};

			country_data = {{ countries|safe }};
		

			var cList = document.getElementById("listOfCountries");

			for (var key in country_data) {
				var entry = document.createElement('li');
				entry.appendChild(document.createTextNode(country_data[key]));
				entry.setAttribute('id', key);
				cList.appendChild(entry);
			}

			var list = document.getElementById("listOfIndicators");

			for (var key in indicator_data) {
				var entry = document.createElement('li');
				entry.appendChild(document.createTextNode(key));
				entry.setAttribute('id', key);
				entry.onclick = exploreAttribute;
				list.appendChild(entry);
			}

			function exploreAttribute() {
				var infoBox = document.getElementById("attributeDescription");
				infoBox.innerHTML = indicator_data[this.getAttribute("id")];
			}
		
		    
		</script>
</html>